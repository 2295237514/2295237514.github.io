{"title":"JDBC总结","uid":"f83fade08690f69bc32eef72fe024ed9","slug":"JDBC总结","date":"2022-05-07T02:47:07.000Z","updated":"2022-05-08T10:11:38.526Z","comments":true,"path":"api/articles/JDBC总结.json","keywords":null,"cover":[],"content":"<h1 id=\"JDBC快速入门-JDBC-pdf\"><a href=\"#JDBC快速入门-JDBC-pdf\" class=\"headerlink\" title=\"JDBC快速入门\t(JDBC.pdf)\"></a>JDBC快速入门\t<a target=\"_blank\" href=\"\\doc\\JDBC.pdf \">(JDBC.pdf)</h1><h2 id=\"1、编写代码步骤\"><a href=\"#1、编写代码步骤\" class=\"headerlink\" title=\"1、编写代码步骤\"></a>1、编写代码步骤</h2><h3 id=\"1、创建工程-导入驱动jar包\"><a href=\"#1、创建工程-导入驱动jar包\" class=\"headerlink\" title=\"1、创建工程,导入驱动jar包\"></a>1、创建工程,导入驱动jar包</h3><p><img src=\"https://cdn.jsdelivr.net/gh/2295237514/image/20220507155303.png\"></p>\n<p><a target = \"_blank\" href = \"\\doc\\mysql-connector-java-5.1.48.jar\"> <em><strong>jar包</strong></em></p>\n<h3 id=\"2、注册驱动\"><a href=\"#2、注册驱动\" class=\"headerlink\" title=\"2、注册驱动\"></a>2、注册驱动</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</code></pre>\n\n<h3 id=\"3、获取连接\"><a href=\"#3、获取连接\" class=\"headerlink\" title=\"3、获取连接\"></a>3、获取连接</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">Connection conn &#x3D; DriverMannager.getConnection(url,username,password);</code></pre>\n\n<h3 id=\"4、定义SQL语句\"><a href=\"#4、定义SQL语句\" class=\"headerlink\" title=\"4、定义SQL语句\"></a>4、定义SQL语句</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">String sql &#x3D; &quot;&quot;;</code></pre>\n\n<h3 id=\"5、获取执行SQL的对象\"><a href=\"#5、获取执行SQL的对象\" class=\"headerlink\" title=\"5、获取执行SQL的对象\"></a>5、获取执行SQL的对象</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">Statement stmt &#x3D; conn.createStatement();</code></pre>\n\n<h3 id=\"6、执行SQL语句\"><a href=\"#6、执行SQL语句\" class=\"headerlink\" title=\"6、执行SQL语句\"></a>6、执行SQL语句</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">stmt.executeUpdate(sql);  \n&#x2F;&#x2F;此方法会执行sql语句并返回受影响的行数。可以用\nint count &#x3D; stmt.executeUpdate(sql)接受返回值;</code></pre>\n\n<h3 id=\"7、处理返回结果\"><a href=\"#7、处理返回结果\" class=\"headerlink\" title=\"7、处理返回结果\"></a>7、处理返回结果</h3><h3 id=\"8、释放资源\"><a href=\"#8、释放资源\" class=\"headerlink\" title=\"8、释放资源\"></a>8、释放资源</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">stmt.close();\nconn.cloes();</code></pre>\n\n<h3 id=\"例\"><a href=\"#例\" class=\"headerlink\" title=\"例\"></a>例</h3><p><img src=\"https://cdn.jsdelivr.net/gh/2295237514/image/20220507161018.png\"></p>\n<h1 id=\"API详解\"><a href=\"#API详解\" class=\"headerlink\" title=\"API详解\"></a>API详解</h1><h2 id=\"1、DriverManager\"><a href=\"#1、DriverManager\" class=\"headerlink\" title=\"1、DriverManager\"></a>1、DriverManager</h2><h3 id=\"1、注册驱动\"><a href=\"#1、注册驱动\" class=\"headerlink\" title=\"1、注册驱动\"></a>1、注册驱动</h3><p>*** MYSQL 5之后的驱动包，可以省略注册驱动的步骤***</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/2295237514/image/20220507220942.png\"></p>\n<p>这个方法可以完成驱动的注册，但是实际开发中一般不会使用这个方法完成驱动的注册</p>\n<p>原因：</p>\n<p>如果需要注册驱动，就会使用，DriverManager.registerDriver(new Driver()); ,但是查看源代码发现，在代码中一段静态代码块，静态代码块已经调用了注册驱动的方法。</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/2295237514/image/20220507221217.png\"></p>\n<p>如果再手动调用该方法注册驱动，就会导致驱动被注册两次。实际开发中一般户次爱用;</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</code></pre>\n\n<h3 id=\"2、获得与数据库的连接\"><a href=\"#2、获得与数据库的连接\" class=\"headerlink\" title=\"2、获得与数据库的连接\"></a>2、获得与数据库的连接</h3><p><img src=\"https://cdn.jsdelivr.net/gh/2295237514/image/20220507221414.png\"></p>\n<p>这个方法就是用来获得与数据库连接的方法，这个方法中的三个参数为 与数据库连接的路径(url)，与数据库连接的用户名(user)，与数据库连接的密码(password)。</p>\n<p>主要是url的写法：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;db1</code></pre>\n\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">jdbc:mysql:&#x2F;&#x2F;ip地址:端口号&#x2F;数据库名称?参数键值对1&amp;参数键值对2...</code></pre>\n\n<p>localhost           :连接的MySQL数据库服务器的主机ip地址。（连接是本机就可以写成localhost），如果连接不是本机的，就需要写上连接主机的IP地址。</p>\n<p>url如果连接的是本机的路径，可以简化为如下格式：</p>\n<p>jdbc:mysql:&#x2F;&#x2F;&#x2F;db1</p>\n<p><em><strong>配置useSSL &#x3D; false 参数，禁用安全连接方式，解决警告提示</strong></em></p>\n<h2 id=\"2、Connection\"><a href=\"#2、Connection\" class=\"headerlink\" title=\"2、Connection\"></a>2、Connection</h2><h3 id=\"1、获取执行SQL对象\"><a href=\"#1、获取执行SQL对象\" class=\"headerlink\" title=\"1、获取执行SQL对象\"></a>1、获取执行SQL对象</h3><p>普通执行SQL对象</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">Statement createStatement();</code></pre>\n\n<p> 预编译SQL的执行SQL对象；防止SQL注入</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">PreparedStatement prepareStatement(sql);</code></pre>\n\n<p>执行存储过程的对象</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">CallableStatement prepareCall(sql)</code></pre>\n\n<h3 id=\"2、事务管理\"><a href=\"#2、事务管理\" class=\"headerlink\" title=\"2、事务管理\"></a>2、事务管理</h3><h4 id=\"MYSQL事务管理\"><a href=\"#MYSQL事务管理\" class=\"headerlink\" title=\"MYSQL事务管理\"></a>MYSQL事务管理</h4><pre class=\"line-numbers language-none\"><code class=\"language-none\">开启事务：  begin;&#x2F;start transaction;\n提交事务：  commit;\n回滚事务：  rollback;\n\nMYSQL默认自动提交事务</code></pre>\n\n<h4 id=\"JDBC事务管理\"><a href=\"#JDBC事务管理\" class=\"headerlink\" title=\"JDBC事务管理\"></a>JDBC事务管理</h4><p>Connection接口中定义了3个对应的方法</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">开启事务：setAutoCommit(bollean autoCommit): true为自动提交事务；false为手动提交事务，即为开启事务\n提交事务：commit()\n回滚事务：rollback()</code></pre>\n\n<p>例：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">package com.itheima.jdbc;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.SQLException;\nimport java.sql.Statement;\n\n&#x2F;**\n * JDBC API 详解：Connection\n *&#x2F;\npublic class JDBCDemo3_Connection &#123;\n\n    public static void main(String[] args) throws Exception &#123;\n        &#x2F;&#x2F;1. 注册驱动\n        &#x2F;&#x2F;Class.forName(&quot;com.mysql.jdbc.Driver&quot;);\n        &#x2F;&#x2F;2. 获取连接：如果连接的是本机mysql并且端口是默认的 3306 可以简化书写\n        String url &#x3D; &quot;jdbc:mysql:&#x2F;&#x2F;&#x2F;db1?useSSL&#x3D;false&quot;;\n        String username &#x3D; &quot;root&quot;;\n        String password &#x3D; &quot;1234&quot;;\n        Connection conn &#x3D; DriverManager.getConnection(url, username, password);\n        &#x2F;&#x2F;3. 定义sql\n        String sql1 &#x3D; &quot;update account set money &#x3D; 3000 where id &#x3D; 1&quot;;\n        String sql2 &#x3D; &quot;update account set money &#x3D; 3000 where id &#x3D; 2&quot;;\n        &#x2F;&#x2F;4. 获取执行sql的对象 Statement\n        Statement stmt &#x3D; conn.createStatement();\n\n        try &#123;\n            &#x2F;&#x2F; 开启事务\n            conn.setAutoCommit(false);\n            &#x2F;&#x2F;5. 执行sql\n            int count1 &#x3D; stmt.executeUpdate(sql1);&#x2F;&#x2F;受影响的行数\n            &#x2F;&#x2F;6. 处理结果\n            System.out.println(count1);\n            int i &#x3D; 3&#x2F;0;\n            &#x2F;&#x2F;5. 执行sql\n            int count2 &#x3D; stmt.executeUpdate(sql2);&#x2F;&#x2F;受影响的行数\n            &#x2F;&#x2F;6. 处理结果\n            System.out.println(count2);\n\n            &#x2F;&#x2F; 提交事务\n            conn.commit();\n        &#125; catch (Exception throwables) &#123;\n            &#x2F;&#x2F; 回滚事务\n            conn.rollback();\n            throwables.printStackTrace();\n        &#125;\n\n\n\n        &#x2F;&#x2F;7. 释放资源\n        stmt.close();\n        conn.close();\n    &#125;\n&#125;</code></pre>\n\n<h2 id=\"3、Statement\"><a href=\"#3、Statement\" class=\"headerlink\" title=\"3、Statement\"></a>3、Statement</h2><h3 id=\"1、执行SQL语句\"><a href=\"#1、执行SQL语句\" class=\"headerlink\" title=\"1、执行SQL语句\"></a>1、执行SQL语句</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">int executeUpdate(sql):执行DML、DDL语句\n返回值（1）DML语句影响的行数（2）DDL语句执行后，执行成功也可能返回0</code></pre>\n\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">ResultSet executeQuery(sql):执行DQL语句\n返回值：Result结果集对象</code></pre>\n\n","feature":true,"text":"JDBC快速入门 (JDBC.pdf)1、编写代码步骤1、创建工程,导入驱动jar包 jar包 2、注册驱动Class.forName(&quot;com.mysql.jdbc.Driver&quot;); 3、获取连接Connection conn &#x3D; DriverM...","link":"","photos":[],"count_time":{"symbolsCount":"3.6k","symbolsTime":"3 mins."},"categories":[],"tags":[],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#JDBC%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8-JDBC-pdf\"><span class=\"toc-text\">JDBC快速入门\t(JDBC.pdf)</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1%E3%80%81%E7%BC%96%E5%86%99%E4%BB%A3%E7%A0%81%E6%AD%A5%E9%AA%A4\"><span class=\"toc-text\">1、编写代码步骤</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1%E3%80%81%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B-%E5%AF%BC%E5%85%A5%E9%A9%B1%E5%8A%A8jar%E5%8C%85\"><span class=\"toc-text\">1、创建工程,导入驱动jar包</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2%E3%80%81%E6%B3%A8%E5%86%8C%E9%A9%B1%E5%8A%A8\"><span class=\"toc-text\">2、注册驱动</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3%E3%80%81%E8%8E%B7%E5%8F%96%E8%BF%9E%E6%8E%A5\"><span class=\"toc-text\">3、获取连接</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4%E3%80%81%E5%AE%9A%E4%B9%89SQL%E8%AF%AD%E5%8F%A5\"><span class=\"toc-text\">4、定义SQL语句</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#5%E3%80%81%E8%8E%B7%E5%8F%96%E6%89%A7%E8%A1%8CSQL%E7%9A%84%E5%AF%B9%E8%B1%A1\"><span class=\"toc-text\">5、获取执行SQL的对象</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#6%E3%80%81%E6%89%A7%E8%A1%8CSQL%E8%AF%AD%E5%8F%A5\"><span class=\"toc-text\">6、执行SQL语句</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#7%E3%80%81%E5%A4%84%E7%90%86%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C\"><span class=\"toc-text\">7、处理返回结果</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#8%E3%80%81%E9%87%8A%E6%94%BE%E8%B5%84%E6%BA%90\"><span class=\"toc-text\">8、释放资源</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BE%8B\"><span class=\"toc-text\">例</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#API%E8%AF%A6%E8%A7%A3\"><span class=\"toc-text\">API详解</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1%E3%80%81DriverManager\"><span class=\"toc-text\">1、DriverManager</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1%E3%80%81%E6%B3%A8%E5%86%8C%E9%A9%B1%E5%8A%A8\"><span class=\"toc-text\">1、注册驱动</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2%E3%80%81%E8%8E%B7%E5%BE%97%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%BF%9E%E6%8E%A5\"><span class=\"toc-text\">2、获得与数据库的连接</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2%E3%80%81Connection\"><span class=\"toc-text\">2、Connection</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1%E3%80%81%E8%8E%B7%E5%8F%96%E6%89%A7%E8%A1%8CSQL%E5%AF%B9%E8%B1%A1\"><span class=\"toc-text\">1、获取执行SQL对象</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2%E3%80%81%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86\"><span class=\"toc-text\">2、事务管理</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#MYSQL%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86\"><span class=\"toc-text\">MYSQL事务管理</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#JDBC%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86\"><span class=\"toc-text\">JDBC事务管理</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3%E3%80%81Statement\"><span class=\"toc-text\">3、Statement</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1%E3%80%81%E6%89%A7%E8%A1%8CSQL%E8%AF%AD%E5%8F%A5\"><span class=\"toc-text\">1、执行SQL语句</span></a></li></ol></li></ol></li></ol>","author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{},"next_post":{"title":"SQL总结","uid":"758e18fa21f3b95498a42a108b10694c","slug":"SQL总结","date":"2022-04-30T08:59:10.000Z","updated":"2022-05-08T09:54:01.886Z","comments":true,"path":"api/articles/SQL总结.json","keywords":null,"cover":[],"text":"SQL通用语法1.SQL语句可以单行或多行书写，以分号结尾。 2.MYSQL数据库的SQL语句不区分大小写，关键字建议适用大写。 3.注释 （1） 单行注释：– 注释内容（两个横杠一个空格+注释内容） 或 #注释内容（MYSQL特有) （2） 多行注释： &#x2F;* 注释 *...","link":"","photos":[],"count_time":{"symbolsCount":"2.3k","symbolsTime":"2 mins."},"categories":[],"tags":[],"author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}